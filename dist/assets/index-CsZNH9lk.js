var ft=s=>{throw TypeError(s)};var $=(s,t,e)=>t.has(s)||ft("Cannot "+e);var i=(s,t,e)=>($(s,t,"read from private field"),e?e.call(s):t.get(s)),p=(s,t,e)=>t.has(s)?ft("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),u=(s,t,e,r)=>($(s,t,"write to private field"),r?r.call(s,e):t.set(s,e),e),d=(s,t,e)=>($(s,t,"access private method"),e);import{ao as Ot,ap as _,aq as It,ar as pt,as as bt,at as Qt,au as Ut,av as Pt,aw as yt,ax as z,ay as vt,az as Dt,aA as St,aB as nt,u as Tt,j as B,aC as Lt,D as At}from"./index-BdoqKkkJ.js";import{r as b}from"./router-Bu5b4_LN.js";var m,c,k,v,U,T,S,q,L,A,P,D,F,j,o,K,Y,J,X,Z,tt,et,st,Et,gt,jt=(gt=class extends Ot{constructor(t,e){super();p(this,o);p(this,m);p(this,c);p(this,k);p(this,v);p(this,U);p(this,T);p(this,S);p(this,q);p(this,L);p(this,A);p(this,P);p(this,D);p(this,F);p(this,j,new Set);this.options=e,u(this,m,t),u(this,S,null),this.bindMethods(),this.setOptions(e)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(i(this,c).addObserver(this),mt(i(this,c),this.options)?d(this,o,K).call(this):this.updateResult(),d(this,o,Z).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return it(i(this,c),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return it(i(this,c),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,d(this,o,tt).call(this),d(this,o,et).call(this),i(this,c).removeObserver(this)}setOptions(t,e){const r=this.options,n=i(this,c);if(this.options=i(this,m).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");d(this,o,st).call(this),i(this,c).setOptions(this.options),r._defaulted&&!_(this.options,r)&&i(this,m).getQueryCache().notify({type:"observerOptionsUpdated",query:i(this,c),observer:this});const a=this.hasListeners();a&&Rt(i(this,c),n,this.options,r)&&d(this,o,K).call(this),this.updateResult(e),a&&(i(this,c)!==n||this.options.enabled!==r.enabled||this.options.staleTime!==r.staleTime)&&d(this,o,Y).call(this);const h=d(this,o,J).call(this);a&&(i(this,c)!==n||this.options.enabled!==r.enabled||h!==i(this,F))&&d(this,o,X).call(this,h)}getOptimisticResult(t){const e=i(this,m).getQueryCache().build(i(this,m),t),r=this.createResult(e,t);return Kt(this,r)&&(u(this,v,r),u(this,T,this.options),u(this,U,i(this,c).state)),r}getCurrentResult(){return i(this,v)}trackResult(t,e){const r={};return Object.keys(t).forEach(n=>{Object.defineProperty(r,n,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(n),e==null||e(n),t[n])})}),r}trackProp(t){i(this,j).add(t)}getCurrentQuery(){return i(this,c)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=i(this,m).defaultQueryOptions(t),r=i(this,m).getQueryCache().build(i(this,m),e);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,e))}fetch(t){return d(this,o,K).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),i(this,v)))}createResult(t,e){var dt;const r=i(this,c),n=this.options,a=i(this,v),h=i(this,U),f=i(this,T),E=t!==r?t.state:i(this,k),{state:y}=t;let l={...y},ht=!1,O;if(e._optimisticResults){const C=this.hasListeners(),N=!C&&mt(t,e),Mt=C&&Rt(t,r,e,n);(N||Mt)&&(l={...l,...Pt(y.data,t.options)}),e._optimisticResults==="isRestoring"&&(l.fetchStatus="idle")}let{error:ot,errorUpdatedAt:ut,status:Q}=l;if(e.select&&l.data!==void 0)if(a&&l.data===(h==null?void 0:h.data)&&e.select===i(this,q))O=i(this,L);else try{u(this,q,e.select),O=e.select(l.data),O=yt(a==null?void 0:a.data,O,e),u(this,L,O),u(this,S,null)}catch(C){u(this,S,C)}else O=l.data;if(e.placeholderData!==void 0&&O===void 0&&Q==="pending"){let C;if(a!=null&&a.isPlaceholderData&&e.placeholderData===(f==null?void 0:f.placeholderData))C=a.data;else if(C=typeof e.placeholderData=="function"?e.placeholderData((dt=i(this,A))==null?void 0:dt.state.data,i(this,A)):e.placeholderData,e.select&&C!==void 0)try{C=e.select(C),u(this,S,null)}catch(N){u(this,S,N)}C!==void 0&&(Q="success",O=yt(a==null?void 0:a.data,C,e),ht=!0)}i(this,S)&&(ot=i(this,S),O=i(this,L),ut=Date.now(),Q="error");const H=l.fetchStatus==="fetching",V=Q==="pending",G=Q==="error",ct=V&&H,lt=O!==void 0;return{status:Q,fetchStatus:l.fetchStatus,isPending:V,isSuccess:Q==="success",isError:G,isInitialLoading:ct,isLoading:ct,data:O,dataUpdatedAt:l.dataUpdatedAt,error:ot,errorUpdatedAt:ut,failureCount:l.fetchFailureCount,failureReason:l.fetchFailureReason,errorUpdateCount:l.errorUpdateCount,isFetched:l.dataUpdateCount>0||l.errorUpdateCount>0,isFetchedAfterMount:l.dataUpdateCount>E.dataUpdateCount||l.errorUpdateCount>E.errorUpdateCount,isFetching:H,isRefetching:H&&!V,isLoadingError:G&&!lt,isPaused:l.fetchStatus==="paused",isPlaceholderData:ht,isRefetchError:G&&lt,isStale:at(t,e),refetch:this.refetch}}updateResult(t){const e=i(this,v),r=this.createResult(i(this,c),this.options);if(u(this,U,i(this,c).state),u(this,T,this.options),i(this,U).data!==void 0&&u(this,A,i(this,c)),_(r,e))return;u(this,v,r);const n={},a=()=>{if(!e)return!0;const{notifyOnChangeProps:h}=this.options,f=typeof h=="function"?h():h;if(f==="all"||!f&&!i(this,j).size)return!0;const g=new Set(f??i(this,j));return this.options.throwOnError&&g.add("error"),Object.keys(i(this,v)).some(E=>{const y=E;return i(this,v)[y]!==e[y]&&g.has(y)})};(t==null?void 0:t.listeners)!==!1&&a()&&(n.listeners=!0),d(this,o,Et).call(this,{...n,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&d(this,o,Z).call(this)}},m=new WeakMap,c=new WeakMap,k=new WeakMap,v=new WeakMap,U=new WeakMap,T=new WeakMap,S=new WeakMap,q=new WeakMap,L=new WeakMap,A=new WeakMap,P=new WeakMap,D=new WeakMap,F=new WeakMap,j=new WeakMap,o=new WeakSet,K=function(t){d(this,o,st).call(this);let e=i(this,c).fetch(this.options,t);return t!=null&&t.throwOnError||(e=e.catch(It)),e},Y=function(){if(d(this,o,tt).call(this),pt||i(this,v).isStale||!bt(this.options.staleTime))return;const e=Qt(i(this,v).dataUpdatedAt,this.options.staleTime)+1;u(this,P,setTimeout(()=>{i(this,v).isStale||this.updateResult()},e))},J=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(i(this,c)):this.options.refetchInterval)??!1},X=function(t){d(this,o,et).call(this),u(this,F,t),!(pt||this.options.enabled===!1||!bt(i(this,F))||i(this,F)===0)&&u(this,D,setInterval(()=>{(this.options.refetchIntervalInBackground||Ut.isFocused())&&d(this,o,K).call(this)},i(this,F)))},Z=function(){d(this,o,Y).call(this),d(this,o,X).call(this,d(this,o,J).call(this))},tt=function(){i(this,P)&&(clearTimeout(i(this,P)),u(this,P,void 0))},et=function(){i(this,D)&&(clearInterval(i(this,D)),u(this,D,void 0))},st=function(){const t=i(this,m).getQueryCache().build(i(this,m),this.options);if(t===i(this,c))return;const e=i(this,c);u(this,c,t),u(this,k,t.state),this.hasListeners()&&(e==null||e.removeObserver(this),t.addObserver(this))},Et=function(t){z.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(i(this,v))}),i(this,m).getQueryCache().notify({query:i(this,c),type:"observerResultsUpdated"})})},gt);function Bt(s,t){return t.enabled!==!1&&s.state.data===void 0&&!(s.state.status==="error"&&t.retryOnMount===!1)}function mt(s,t){return Bt(s,t)||s.state.data!==void 0&&it(s,t,t.refetchOnMount)}function it(s,t,e){if(t.enabled!==!1){const r=typeof e=="function"?e(s):e;return r==="always"||r!==!1&&at(s,t)}return!1}function Rt(s,t,e,r){return(s!==t||r.enabled===!1)&&(!e.suspense||s.state.status!=="error")&&at(s,e)}function at(s,t){return t.enabled!==!1&&s.isStaleByTime(t.staleTime)}function Kt(s,t){return!_(s.getCurrentResult(),t)}var M,I,R,w,x,W,rt,Ct,kt=(Ct=class extends Ot{constructor(t,e){super();p(this,x);p(this,M);p(this,I);p(this,R);p(this,w);u(this,M,t),this.setOptions(e),this.bindMethods(),d(this,x,W).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var r;const e=this.options;this.options=i(this,M).defaultMutationOptions(t),_(this.options,e)||i(this,M).getMutationCache().notify({type:"observerOptionsUpdated",mutation:i(this,R),observer:this}),e!=null&&e.mutationKey&&this.options.mutationKey&&vt(e.mutationKey)!==vt(this.options.mutationKey)?this.reset():((r=i(this,R))==null?void 0:r.state.status)==="pending"&&i(this,R).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=i(this,R))==null||t.removeObserver(this)}onMutationUpdate(t){d(this,x,W).call(this),d(this,x,rt).call(this,t)}getCurrentResult(){return i(this,I)}reset(){var t;(t=i(this,R))==null||t.removeObserver(this),u(this,R,void 0),d(this,x,W).call(this),d(this,x,rt).call(this)}mutate(t,e){var r;return u(this,w,e),(r=i(this,R))==null||r.removeObserver(this),u(this,R,i(this,M).getMutationCache().build(i(this,M),this.options)),i(this,R).addObserver(this),i(this,R).execute(t)}},M=new WeakMap,I=new WeakMap,R=new WeakMap,w=new WeakMap,x=new WeakSet,W=function(){var e;const t=((e=i(this,R))==null?void 0:e.state)??Dt();u(this,I,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},rt=function(t){z.batch(()=>{var e,r,n,a,h,f,g,E;if(i(this,w)&&this.hasListeners()){const y=i(this,I).variables,l=i(this,I).context;(t==null?void 0:t.type)==="success"?((r=(e=i(this,w)).onSuccess)==null||r.call(e,t.data,y,l),(a=(n=i(this,w)).onSettled)==null||a.call(n,t.data,null,y,l)):(t==null?void 0:t.type)==="error"&&((f=(h=i(this,w)).onError)==null||f.call(h,t.error,y,l),(E=(g=i(this,w)).onSettled)==null||E.call(g,void 0,t.error,y,l))}this.listeners.forEach(y=>{y(i(this,I))})})},Ct),wt=b.createContext(!1),qt=()=>b.useContext(wt);wt.Provider;function Wt(){let s=!1;return{clearReset:()=>{s=!1},reset:()=>{s=!0},isReset:()=>s}}var _t=b.createContext(Wt()),zt=()=>b.useContext(_t);function xt(s,t){return typeof s=="function"?s(...t):!!s}function Ht(){}var Vt=(s,t)=>{(s.suspense||s.throwOnError)&&(t.isReset()||(s.retryOnMount=!1))},Gt=s=>{b.useEffect(()=>{s.clearReset()},[s])},Nt=({result:s,errorResetBoundary:t,throwOnError:e,query:r})=>s.isError&&!t.isReset()&&!s.isFetching&&r&&xt(e,[s.error,r]),$t=s=>{s.suspense&&typeof s.staleTime!="number"&&(s.staleTime=1e3)},Yt=(s,t)=>(s==null?void 0:s.suspense)&&t.isPending,Jt=(s,t,e)=>t.fetchOptimistic(s).catch(()=>{e.clearReset()});function Xt(s,t,e){const r=St(),n=qt(),a=zt(),h=r.defaultQueryOptions(s);h._optimisticResults=n?"isRestoring":"optimistic",$t(h),Vt(h,a),Gt(a);const[f]=b.useState(()=>new t(r,h)),g=f.getOptimisticResult(h);if(b.useSyncExternalStore(b.useCallback(E=>{const y=n?()=>{}:f.subscribe(z.batchCalls(E));return f.updateResult(),y},[f,n]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),b.useEffect(()=>{f.setOptions(h,{listeners:!1})},[h,f]),Yt(h,g))throw Jt(h,f,a);if(Nt({result:g,errorResetBoundary:a,throwOnError:h.throwOnError,query:r.getQueryCache().get(h.queryHash)}))throw g.error;return h.notifyOnChangeProps?g:f.trackResult(g)}function Zt(s,t){return Xt(s,jt)}function Ft(s,t){const e=St(),[r]=b.useState(()=>new kt(e,s));b.useEffect(()=>{r.setOptions(s)},[r,s]);const n=b.useSyncExternalStore(b.useCallback(h=>r.subscribe(z.batchCalls(h)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=b.useCallback((h,f)=>{r.mutate(h,f).catch(Ht)},[r]);if(n.error&&xt(r.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:a,mutateAsync:n.mutate}}const te=async(s,t)=>(await nt.get(s,{...t})).data;function oe({key:s,api:t,options:e,value:r,config:n}){return Zt({queryKey:[s??t,...r??[]],queryFn:async()=>await te(t,n),refetchOnReconnect:"always",refetchOnWindowFocus:!1,...e})}const ee=(s,t)=>nt.post(s,t),ue=({options:s})=>Ft({mutationFn:({api:t,data:e})=>ee(t,e),...s}),se=(s,t)=>nt.put(s,t),ce=({options:s})=>Ft({mutationFn:({api:t,data:e})=>se(t,e),...s});function ie(s=""){const{setTitle:t}=Tt();return b.useEffect(()=>{t(s)},[s]),null}const le=b.forwardRef(({children:s,title:t="",meta:e,className:r,...n},a)=>(ie(t),b.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},[t]),B.jsxs(B.Fragment,{children:[B.jsxs(Lt,{children:[B.jsx("title",{children:`${t} | GYM`}),e]}),B.jsx("div",{ref:a,...n,className:At("px-4 py-1",r),children:s})]})));export{le as P,oe as a,ce as b,ue as u};
