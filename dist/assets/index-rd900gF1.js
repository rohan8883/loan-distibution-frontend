import{g as w,j as e,A as k,d as F,e as z,H as E,_ as c}from"./index-BdoqKkkJ.js";import{d as I,r as o}from"./router-Bu5b4_LN.js";import{C as M}from"./card-fEl4wnA7.js";import{b as _,a as B,P as T}from"./index-CsZNH9lk.js";import{L as U,P as q}from"./index-CaJnJWf8.js";import{S as H}from"./index-ns-rqW2I.js";import{h as a}from"./moment-BjLXg0w5.js";import{C as R}from"./index-Cd_iLryw.js";import{E as V}from"./eye-CsWJjFVd.js";import{T as G}from"./trash-D90pU7HV.js";import"./axios-jfmoi6Ws.js";import"./select-Bl5H_JfX.js";import"./input-BAP8HvZQ.js";function ae(){var x,h,p,u,f,b,j,g,N;const A=_({}),L=I(),[m,n]=o.useState(1),[l,C]=o.useState(5),[d,D]=o.useState(""),t=B({api:`${w.getAllExpiredSubscription}?page=${m}&limit=${l}&q=${d}`,key:"exp-list",value:[m,l],options:{enabled:!0}}),$=async s=>{R("Are you sure?","Do you really want to delete this?",async()=>{var r;try{(r=(await A.mutateAsync({api:`${w.updateExpInSubscription}/${s}`,data:{}})).data)!=null&&r.success?(t.refetch(),c.success("Deleted Successfully")):c.error("Failed to delete")}catch{c.error("Failed to delete")}})};return e.jsxs(T,{title:"Expired Subscription",children:[e.jsx("div",{className:"flex items-center justify-between mt-4",children:e.jsxs("h1",{className:"text-base font-semibold text-muted-foreground",children:["Expired Subscription List(",(x=t.data)==null?void 0:x.data.totalDocs,")"]})}),e.jsx("div",{className:"border-t border-secondary mt-3 mb-2"}),e.jsx(H,{search:d,setSearch:D,refetch:t.refetch,isFetching:t.isFetching,setPage:n}),e.jsx("div",{className:"border-t border-secondary mt-1 mb-1"}),e.jsxs(U,{dataLength:(p=(h=t.data)==null?void 0:h.data)==null?void 0:p.docs.length,isLoading:t.isLoading,children:[e.jsx("div",{className:"grid grid-cols-1 gap-3 mt-2",children:(f=(u=t.data)==null?void 0:u.data)==null?void 0:f.docs.map((s,r)=>{var i,y,v,P,S;return e.jsxs(M,{children:[e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(k,{className:"w-12 h-12 border dark:border-gray-700",children:[e.jsx(F,{src:(i=s==null?void 0:s.member)==null?void 0:i.fullImgUrl,alt:"@shadcn"}),e.jsx(z,{className:"text-base text-primary",children:(y=s==null?void 0:s.member)==null?void 0:y.memberName.charAt(0).toUpperCase()})]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-primary font-semibold text-sm",children:[(v=s==null?void 0:s.member)==null?void 0:v.memberName," "]}),e.jsx("div",{className:"text-primary font-bold ",children:e.jsx("h1",{className:"text-muted-foreground text-xs",children:(P=s==null?void 0:s.member)==null?void 0:P.generatedId})})]})]}),e.jsx("div",{children:e.jsx("h1",{className:"text-primary font-semibold text-sm",children:a(s.endDate).diff(a(),"days")+1<=0?e.jsx("span",{className:"text-red-500",children:"Expired"}):e.jsx("span",{className:"text-red-500",children:a(s.endDate).diff(a(),"days")+1+" days left"})})})]})}),e.jsx("div",{className:"px-4 mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-primary font-semibold text-xs",children:(S=s==null?void 0:s.member)==null?void 0:S.mobile}),e.jsx("small",{className:"text-muted-foreground font-semibold text-xs",children:"Mobile"})]}),e.jsx("div",{children:e.jsx("h1",{className:"text-primary font-semibold text-xs",children:s==null?void 0:s.planName})})]})}),e.jsxs("div",{className:"flex items-center justify-between px-4 mb-4 gap-4",children:[e.jsxs(E,{variant:"outline",size:"sm",className:"text-primary w-full h-6 ",onClick:()=>L(`/gym-app/view-member/${s==null?void 0:s.member._id}`),children:[e.jsx(V,{size:16}),e.jsx("h1",{className:"ms-1 text-xs",children:"View"})]}),e.jsxs(E,{variant:"outline",size:"sm",className:"text-red-600 w-full h-6 border-red-600 ",onClick:()=>$(s._id),children:[e.jsx(G,{size:16}),e.jsx("h1",{className:"ms-1 text-xs",children:"Delete"})]})]})]},r+1)})}),e.jsx("div",{className:"flex justify-end mt-3",children:e.jsx(q,{page:m,perPage:l,totalPage:(b=t.data)==null?void 0:b.data.totalDocs,hasNextPage:(g=(j=t.data)==null?void 0:j.data)==null?void 0:g.hasNextPage,hasPrevPage:(N=t.data)==null?void 0:N.data.hasPrevPage,setPage:n,setPerPage:C})})]})]})}export{ae as default};
